<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Simple Search Engine</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
		/>
		<link
			href="https://fonts.googleapis.com/css2?family=Product+Sans:wght@700&display=swap"
			rel="stylesheet"
		/>
		<style>
			body {
				background: #181818;
				color: #e8eaed;
				height: 100vh;
				margin: 0;
			}
			.center-viewport {
				height: 100vh;
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
			}
			.site-title {
				font-size: 2.5rem;
				font-weight: 700;
				letter-spacing: 2px;
				margin-bottom: 32px;
				color: #3eb489; /* dark mint green */
				text-shadow: 0 2px 8px #000a;
				font-family: 'Product Sans', Arial, Helvetica, sans-serif;
			}
			.search-box {
				width: 700px;
				max-width: 90vw;
				background: none;
				border: none;
				box-shadow: none;
				margin: 0;
				padding: 0;
			}
			.search-form {
				width: 100%;
				display: flex;
				align-items: center;
				border-radius: 2rem;
				background: #303134;
				box-shadow: 0 1px 6px 0 #0003;
				padding: 0.25rem 0.5rem 0.25rem 2rem;
			}
			#searchInput {
				background: transparent;
				border: none;
				color: #e8eaed;
				border-radius: 2rem 0 0 2rem;
				font-size: 1.2rem;
				box-shadow: none;
				outline: none;
				flex: 1;
				padding: 0;
				line-height: normal;
				height: 3.2rem;
				padding-top: 0.5rem;
				padding-bottom: 0.5rem;
				vertical-align: middle;
				caret-color: #8ab4f8; /* Bright blue for better visibility */
				width: 90%;
				padding-left: 1.5rem;
			}
			#searchInput::placeholder {
				color: #b0b0b0;
			}
			.search-btn {
				border-radius: 0 2rem 2rem 0;
				background: #303134;
				border: none;
				color: #e29f0f;
				font-size: 1.5rem;
				padding: 0.5rem 1.5rem;
				transition: background 0.2s;
			}
			.search-btn:hover {
				background: #44464a;
			}
			.result-link {
				font-size: 1.1rem;
				color: #8ab4f8;
				word-break: break-all;
			}
			.result-snippet {
				color: #b0b0b0;
			}
			.card {
				background: #202124;
				border: none;
				color: #e8eaed;
			}
		</style>
	</head>
	<body>
		<div class="center-viewport">
			<div class="site-title">search X</div>
			<div class="search-box">
				<form id="searchForm" class="search-form w-100">
					<input
						id="searchInput"
						class="form-control"
						type="search"
						placeholder="Type your search..."
						aria-label="Search"
					/>
					<button class="search-btn" type="submit">
						<i class="bi bi-search"></i>
					</button>
				</form>
			</div>
			<div id="results" class="mt-4 w-100" style="max-width: 600px"></div>
		</div>
		<script>
			document
				.getElementById('searchForm')
				.addEventListener('submit', async function (e) {
					e.preventDefault();
					const query = document.getElementById('searchInput').value.trim();
					if (!query) return;
					const resultsDiv = document.getElementById('results');
					resultsDiv.innerHTML =
						'<div class="text-center text-secondary">Searching...</div>';
					try {
						const res = await fetch(
							`/api/search?query=${encodeURIComponent(query)}`
						);
						const data = await res.json();
						if (data.length === 0) {
							resultsDiv.innerHTML =
								'<div class="text-center text-danger">No results found.</div>';
						} else {
							resultsDiv.innerHTML = data
								.map(
									(r) => `
                        <div class="card mb-3 p-3">
                            <a class="result-link" href="${r.url}" target="_blank">${r.url}</a>
                            <div class="result-snippet">${r.snippet}</div>
                        </div>
                    `
								)
								.join('');
						}
					} catch (err) {
						resultsDiv.innerHTML =
							'<div class="text-center text-danger">Error fetching results.</div>';
					}
				});
		</script>
	</body>
</html>
